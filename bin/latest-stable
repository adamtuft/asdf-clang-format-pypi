#!/usr/bin/env bash

set -euo pipefail

current_script_path=${BASH_SOURCE[0]}
plugin_dir=$(dirname "$(dirname "$current_script_path")")

# shellcheck source=./lib/utils.bash
. "${plugin_dir}/lib/utils.bash"

py_get_latest() {
	cat <<EOF
import json, sys
q = json.loads(sys.stdin.read())
print(q['latest'])
EOF
}

python3 -m pip index --json versions clang-format | python3 -c "$(py_get_latest)"
